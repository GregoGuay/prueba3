<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Escena A-Frame — Ejemplo</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <!-- Comentarios: guarda este archivo como `escena-aframe.html` y ábrelo en tu navegador -->
  <style>
    body { margin: 0; font-family: sans-serif; }
    .hint { position: fixed; left: 8px; top: 8px; background: rgba(0,0,0,0.5); color: white; padding: 6px 10px; border-radius: 6px; z-index: 999; }
  </style>
</head>
<body>
  <div class="hint">WASD / flechas para moverte • Click o tap para interactuar • Pulsa F11 para pantalla completa</div>

  <a-scene background="color: #88ccee" cursor="rayOrigin: mouse">

    <!-- Assets (texturas, modelos, sonidos) -->
    <a-assets>
      <!-- Puedes añadir aquí <img>, <audio>, <a-asset-item> para glTF, etc. -->
    </a-assets>

    <!-- Cámara con controles y cursor (usable en escritorio y móviles) -->
    <a-entity id="player" position="0 1.6 4">
      <a-entity camera look-controls wasd-controls="acceleration: 200" position="0 0 0">
        <a-entity cursor="fuse: false; rayOrigin: mouse" raycaster="objects: .clickable" position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
                  material="shader: flat; opacity: 0.9">
      <!-- Marcos de ventanas -->
      <a-box position="-2.4 2 -2" width="1.55" height="1.05" depth="0.05" color="#604020"></a-box>
      <a-box position="2.4 2 -2" width="1.55" height="1.05" depth="0.05" color="#604020"></a-box>
      <a-box position="0 2 3.6" width="2.05" height="1.25" depth="0.05" color="#604020"></a-box>

      <!-- Puertas interiores con bisagra -->
      <a-entity position="-1 0.1 -0.2">
        
      </a-entity>
      <a-entity position="1 0.1 -0.2">
        <a-box class="clickable" id="pRight" position="0.5 0.9 0" width="1" height="1.8" depth="0.08" color="#6b4a2b"></a-box>
      </a-entity>
      <a-entity position="0 0.1 1">
        <a-box class="clickable" id="pBath" position="0.6 0.9 0" width="1.2" height="1.8" depth="0.08" color="#6b4a2b"></a-box>
      </a-entity>

      <!-- Muebles mejorados -->
      <!-- Cama habitación izquierda -->
      <a-box position="-1.8 0.45 -3" width="1.6" height="0.4" depth="2.4" color="#8d6e63"></a-box>
      <a-box position="-1.8 0.9 -3" width="1.6" height="0.1" depth="2.4" color="#ffffff"></a-box>

      <!-- Escritorio habitación derecha -->
      <a-box position="1.8 0.7 -3" width="1.6" height="0.7" depth="0.8" color="#9e9e9e"></a-box>
      <a-box position="1.8 1 -3" width="1.4" height="0.05" depth="0.6" color="#cfcfcf"></a-box>

      <!-- Baño: lavabo y ducha -->
      
      
      <a-box position="1 0.7 2.3" width="0.8" height="0.8" depth="0.6" color="#e0e0e0"></a-box>
      <a-box position="1 1.6 2.3" width="0.8" height="1.6" depth="0.1" color="#d0d0d0"></a-box>

      <!-- Interruptores de luz -->
      <a-box id="switch1" class="clickable" position="-0.5 1.2 -1" width="0.1" height="0.2" depth="0.05" color="#333"></a-box>
      <a-box id="switch2" class="clickable" position="0.5 1.2 -1" width="0.1" height="0.2" depth="0.05" color="#333"></a-box>
      <a-box id="switch3" class="clickable" position="0 1.2 1.5" width="0.1" height="0.2" depth="0.05" color="#333"></a-box>

      <!-- Segundo piso (estructura) -->
      <a-box position="0 3 0" depth="8" height="4" width="5" color="#d1c6a0" opacity="0.97"></a-box>
      <a-plane rotation="-90 0 0" position="0 2.01 0" width="5" height="8" color="#b89f7a"></a-plane>

    </a-entity>
    </a-entity>

    <!-- Luz ambiente y direccional -->
    <a-entity light="type: ambient; intensity: 0.6"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="-1 2 1"></a-entity>

    <!-- Suelo -->
    <a-plane rotation="-90 0 0" width="30" height="30" color="#4CAF50" shadow="receive: true"></a-plane>

    <!-- Cielo con gradiente (simulado con una esfera grande) -->
    <a-sky color="#87CEEB"></a-sky>

    <!-- Elementos interactivos -->
    <!-- Caja giratoria (clic para cambiar color) -->
    <a-box class="clickable"
           position="-1 0.75 -2"
           rotation="0 45 0"
           depth="1"
           height="1"
           width="1"
           material="color: #FF5722; metalness: 0.2; roughness: 0.6"
           animation="property: rotation; to: 0 405 0; loop: true; dur: 6000; easing: linear"
           event-set__enter="material.color: #FFC107"
           event-set__leave="material.color: #FF5722"
           >
    </a-box>

    <!-- Esfera flotante con animación de rebote -->
    

    <!-- Texto 3D informativo -->
    <a-entity position="0 2 -3">
      <a-text value="Gay el que lo lea." align="center" width="4" color="#111" ></a-text>
    </a-entity>

    <!-- Unos pequeños cilindros alrededor para decoración -->
    
    
    

    <!-- Entidad que escucha clicks y muestra una animación breve -->
    <a-entity id="click-handler" position="0 0 0">
      <a-entity id="pulse" geometry="primitive: ring; radiusInner: 0.2; radiusOuter: 0.25" material="opacity: 0.7" visible="false"></a-entity>
    </a-entity>

    <!-- Script para interactividad extra -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const clickables = document.querySelectorAll('.clickable');
        const pulse = document.querySelector('#pulse');

        // Efecto de pulso existente
        clickables.forEach(el => {
          el.addEventListener('click', () => {
            const pos = el.getAttribute('position');
            pulse.setAttribute('position', { x: pos.x, y: pos.y + 0.1, z: pos.z });
            pulse.setAttribute('visible', true);
            pulse.setAttribute('animation', 'property: scale; to: 4 4 4; dur: 300; easing: easeOutQuad');
            setTimeout(() => {
              pulse.setAttribute('visible', false);
              pulse.removeAttribute('animation');
            }, 320);
          });
        });

        // --- FIX DE LA PUERTA ---
        const door = document.querySelector('#door');
        let abierta = false;

        door.addEventListener('click', () => {
          if (!abierta) {
            door.setAttribute('animation__open', {
              property: 'rotation', to: '0 90 0', dur: 700, easing: 'easeOutQuad'
            });
          } else {
            door.setAttribute('animation__close', {
              property: 'rotation', to: '0 0 0', dur: 700, easing: 'easeOutQuad'
            });
          }
          abierta = !abierta;
        });
      });
    </script>

      <!-- Casa interactiva -->
    <a-entity id="house" position="0 0 -10" scale="1.8 1.8 1.8">
      <!-- Paredes principales más grandes -->
      <a-box position="0 1.5 0" depth="8" height="4" width="5" color="#d9c7a3" material="roughness:0.8"></a-box>

      <!-- Suelos internos más amplios -->
      <a-plane rotation="-90 0 0" position="-1.3 0.01 -2" width="2" height="3.5" color="#c8b89a"></a-plane>
      <a-plane rotation="-90 0 0" position="1.3 0.01 -2" width="2" height="3.5" color="#c8b89a"></a-plane>
      <a-plane rotation="-90 0 0" position="0 0.01 2.2" width="4" height="3.2" color="#bababa"></a-plane>

      <!-- Paredes divisorias -->
      <a-box position="0 1 -2" depth="0.05" height="3" width="5" color="#e2d5bc"></a-box>
      <a-box position="0 1 0.3" depth="0.05" height="3" width="5" color="#e2d5bc"></a-box>

      <!-- Techo centrado -->
      <a-cone position="0 4.1 0.2" radius-bottom="3.6" radius-top="0.1" height="2" color="#b54a1d"></a-cone>

      <!-- Puerta principal -->
      <a-entity id="doorPivot" position="-1.1 0 4">
        <a-box id="door" class="clickable" position="0.55 1 0" depth="0.08" height="2" width="1.1" color="#5a3e1b"></a-box>
      </a-entity>

      <!-- Puertas interiores -->
      <a-box class="clickable" position="-1 1 -0.2" width="1" height="1.8" depth="0.08" color="#6b4a2b"></a-box>
      <a-box class="clickable" position="1 1 -0.2" width="1" height="1.8" depth="0.08" color="#6b4a2b"></a-box>
      <a-box class="clickable" position="0 1 1" width="1.2" height="1.8" depth="0.08" color="#6b4a2b"></a-box>

      <!-- Ventanas más grandes -->
      <a-plane position="-2.4 2 -2" width="1.5" height="1" color="#aee7ff" opacity="0.7"></a-plane>
      <a-plane position="2.4 2 -2" width="1.5" height="1" color="#aee7ff" opacity="0.7"></a-plane>
      <a-plane position="0 2 3.6" width="2" height="1.2" color="#aee7ff" opacity="0.7"></a-plane>

      <!-- Muebles habitaciones -->
      <a-box position="-1.8 0.6 -3" width="1" height="0.6" depth="1.6" color="#8d6e63"></a-box>
      <a-box position="-0.8 0.3 -3.4" width="0.6" height="0.4" depth="0.6" color="#9e9e9e"></a-box>

      <a-box position="1.8 0.6 -3" width="1" height="0.6" depth="1.6" color="#8d6e63"></a-box>
      <a-box position="0.8 0.3 -3.4" width="0.6" height="0.4" depth="0.6" color="#9e9e9e"></a-box>

      <!-- Muebles baño -->
      
      <a-box position="1 0.7 2.3" width="0.8" height="0.8" depth="0.6" color="#e0e0e0"></a-box>

      <!-- Luces interiores -->
      <a-entity light="type: point; intensity: 1; distance: 7" position="-1.3 3 -2"></a-entity>
      <a-entity light="type: point; intensity: 1; distance: 7" position="1.3 3 -2"></a-entity>
      <a-entity light="type: point; intensity: 1; distance: 7" position="0 3 2"></a-entity>
    </a-entity>
      <a-entity light="type: point; intensity: 0.6; distance: 5" position="0.8 2 -1.5"></a-entity>
      <a-entity light="type: point; intensity: 0.6; distance: 5" position="0 2 1.5"></a-entity> interactiva (con bisagra real) -->
      <!-- Contenedor que actúa como bisagra en el lado izquierdo -->
      <a-entity id="doorPivot" position="-0.5 0 1.52">
        <a-box id="door" class="clickable"
               position="0.5 0.75 0"
               depth="0.05" height="1.5" width="1"
               color="#5a3e1b">
        </a-box>
      </a-entity>
    </a-entity>

    <script>
      // Control de apertura/cierre de puerta
      document.addEventListener('DOMContentLoaded', function () {
        const door = document.querySelector('#door');
        let abierta = false;

        door.addEventListener('click', () => {
          if (!abierta) {
            door.emit('abrir');
          } else {
            door.emit('cerrar');
          }
          abierta = !abierta;
        });
      });
    </script>

  </a-scene>
</body>
</html>
